<%- include('../components/header', {title: `Complete Web Development Bootcamp | TechCourses Market`}) %>

<!-- Custom CSS -->
    <style>
        .lecture-video {
            background-color: #000;
            min-height: 400px;
        }
        .sidebar {
            height: calc(100vh - 56px);
            overflow-y: auto;
            position: sticky;
            top: 56px;
            scroll-margin-right: 10px;
        }
        .list-group-item.active {
            color: #000;
            background-color: #f8f9fa;
            border-left: 3px solid #0d6efd;
        }
        .progress-thumbnail {
            width: 80px;
            height: 45px;
            object-fit: cover;
        }
        .completed {
            color: #198754;
        }
    </style>

    <!-- Main Content -->
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar - Course Content -->
            <div class="col-lg-3 col-md-4 p-0 bg-light sidebar d-none d-md-block">
                <div class="p-3">
                    <h5 class="mb-3"><%= course.title %></h5>
                    <div class="progress mb-3">
                        <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
                    </div>
                    <div class="d-flex justify-content-between mb-3">
                        <small>8 of 32 lectures completed</small>
                        <button class="btn btn-sm btn-outline-secondary">Mark as Completed</button>
                    </div>
                </div>

                <div class="list-group list-group-flush rounded-0">
                    <% course.sections.forEach(function(section){ %>
                        <div class="list-group-item bg-light fw-bold">Section <%= section.id %>: <%= section.title %></div>
                        <% section.lectures.forEach(function(lecture){ %>
                            <a href="#" class="list-group-item list-group-item-action active">
                                <div class="d-flex justify-content-between align-items-center">
                                    <span><i class="bi bi-play-circle-fill me-2"></i><%= lecture.title %></span>
                                    <span class="badge bg-secondary"><%= lecture.duration %></span>
                                </div>
                            </a>
                        <% }); %>
                    <% }); %>
                    
                    <!-- More lecture items... -->
                </div>
            </div>

            <!-- Main Content Area -->
            <div class="col-lg-9 col-md-8 col-12">
                <div class="p-3 border-bottom d-flex justify-content-between align-items-center">
                    <h1 class="h4 mb-0">Introduction to HTML</h1>
                    <div class="dropdown">
                        <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="resourcesDropdown" data-bs-toggle="dropdown">
                            <i class="bi bi-download"></i> Resources
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-pdf"></i> Lecture Slides</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-code"></i> Example Code</a></li>
                            <li><a class="dropdown-item" href="#"><i class="bi bi-file-earmark-text"></i> Cheat Sheet</a></li>
                        </ul>
                    </div>
                </div>

                <!-- Video Player -->
                <div class="ratio ratio-16x9 lecture-video">
                    <iframe src="https://www.youtube.com/embed/dQw4w9WgXcQ" title="Lecture Video" allowfullscreen></iframe>
                </div>

                <!-- Video Controls -->
                <div class="p-3 border-bottom d-flex justify-content-between align-items-center">
                    <div>
                        <button class="btn btn-outline-secondary me-2">
                            <i class="bi bi-arrow-left"></i> Previous
                        </button>
                        <button class="btn btn-outline-secondary">
                            Next <i class="bi bi-arrow-right"></i>
                        </button>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="completedToggle" checked>
                        <label class="form-check-label" for="completedToggle">Mark as completed</label>
                    </div>
                </div>

                <!-- Lecture Description -->
                <div class="p-4">
                    <h3 class="h5">About this lecture</h3>
                    <p>In this lecture, you'll learn the fundamentals of HTML, the standard markup language for creating web pages. We'll cover the basic structure of an HTML document, common tags, and how to create your first web page.</p>
                    
                    <div class="alert alert-info mt-4">
                        <i class="bi bi-lightbulb"></i> <strong>Pro Tip:</strong> Practice along with the video by creating your own HTML file and experimenting with the tags we discuss.
                    </div>
                </div>

                <!-- Discussion & Notes Section -->
                <div class="p-4 border-top">
                    <ul class="nav nav-tabs" id="lectureTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="notes-tab" data-bs-toggle="tab" data-bs-target="#notes" type="button">Notes</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="discussion-tab" data-bs-toggle="tab" data-bs-target="#discussion" type="button">Discussion</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="resources-tab" data-bs-toggle="tab" data-bs-target="#resources" type="button">Resources</button>
                        </li>
                    </ul>
                    <div class="tab-content p-3 border-start border-end border-bottom" id="lectureTabsContent">
                        <div class="tab-pane fade show active" id="notes" role="tabpanel">
                            <div class="mb-3">
                                <textarea class="form-control" rows="5" placeholder="Add your personal notes here..."></textarea>
                                <div class="d-flex justify-content-end mt-2">
                                    <button class="btn btn-primary btn-sm">Save Notes</button>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-header">
                                    Saved Notes
                                </div>
                                <div class="card-body">
                                    <p class="card-text">HTML stands for HyperText Markup Language. The basic structure includes &lt;html&gt;, &lt;head&gt;, and &lt;body&gt; tags.</p>
                                    <small class="text-muted">Last updated 2 days ago</small>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="discussion" role="tabpanel">
                            <div class="mb-3">
                                <textarea class="form-control" rows="3" placeholder="Ask a question or contribute to the discussion..."></textarea>
                                <div class="d-flex justify-content-end mt-2">
                                    <button class="btn btn-primary btn-sm">Post Comment</button>
                                </div>
                            </div>
                            <div class="list-group">
                                <div class="list-group-item">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Sarah Johnson</h6>
                                        <small>3 days ago</small>
                                    </div>
                                    <p class="mb-1">What's the difference between HTML5 and previous versions?</p>
                                    <small><a href="#" class="text-decoration-none">Reply</a></small>
                                </div>
                                <div class="list-group-item">
                                    <div class="d-flex w-100 justify-content-between">
                                        <h6 class="mb-1">Instructor</h6>
                                        <small>2 days ago</small>
                                    </div>
                                    <p class="mb-1">HTML5 introduced new semantic elements like &lt;header&gt;, &lt;footer&gt;, and &lt;article&gt;, as well as native support for audio and video elements.</p>
                                    <small><a href="#" class="text-decoration-none">Reply</a></small>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="resources" role="tabpanel">
                            <div class="list-group">
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="bi bi-file-earmark-pdf text-danger"></i> HTML5 Cheat Sheet.pdf
                                        </div>
                                        <small class="text-muted">2.4 MB</small>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="bi bi-file-earmark-code text-primary"></i> Lecture Examples.zip
                                        </div>
                                        <small class="text-muted">1.1 MB</small>
                                    </div>
                                </a>
                                <a href="#" class="list-group-item list-group-item-action">
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="bi bi-link-45deg"></i> W3Schools HTML Reference
                                        </div>
                                        <small class="text-muted">External Link</small>
                                    </div>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Bottom Navigation (for smaller screens) -->
    <div class="d-block d-md-none fixed-bottom bg-white border-top">
        <div class="container">
            <div class="row py-2">
                <div class="col-4 text-center">
                    <button class="btn btn-link" data-bs-toggle="offcanvas" data-bs-target="#mobileSidebar">
                        <i class="bi bi-list-ul"></i><br>
                        <small>Content</small>
                    </button>
                </div>
                <div class="col-4 text-center">
                    <a href="#" class="btn btn-link">
                        <i class="bi bi-journal-text"></i><br>
                        <small>Notes</small>
                    </a>
                </div>
                <div class="col-4 text-center">
                    <a href="#" class="btn btn-link">
                        <i class="bi bi-download"></i><br>
                        <small>Resources</small>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Mobile Sidebar Offcanvas -->
    <div class="offcanvas offcanvas-start" tabindex="-1" id="mobileSidebar">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">Course Content</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <div class="progress mb-3">
                <div class="progress-bar" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">25%</div>
            </div>
            <div class="list-group list-group-flush">
                <div class="list-group-item bg-light fw-bold">Section 1: HTML Fundamentals</div>
                <a href="#" class="list-group-item list-group-item-action active">
                    <div class="d-flex justify-content-between align-items-center">
                        <span><i class="bi bi-play-circle-fill me-2"></i> Introduction to HTML</span>
                        <span class="badge bg-secondary">12:45</span>
                    </div>
                </a>
                <!-- More mobile sidebar items... -->
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script>
        // Example: Mark lecture as completed
        document.getElementById('completedToggle').addEventListener('change', function() {
            const lectureItem = document.querySelector('.lecture-item.active');
            if (this.checked) {
                lectureItem.querySelector('i').className = 'bi bi-check-circle-fill completed me-2';
            } else {
                lectureItem.querySelector('i').className = 'bi bi-play-circle me-2';
            }
            
            // In a real app, you would send an AJAX request to update progress
            console.log('Lecture completion status changed:', this.checked);
        });
    </script>
</body>
</html>